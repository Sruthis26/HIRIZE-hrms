<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Add Job Posting</title>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css">
</head>
<body>
    <div class="container mt-5">
        <h2 class="mb-4">Add Job Posting</h2>
        <form id="jobForm">
            <div class="mb-3">
                <label class="form-label">Job Position</label>
                <select class="form-control" id="jobPosition" required>
                    <option value="">Select Position</option>
                    <option value="UX/UI Designer">UX/UI Designer</option>
                    <option value="Frontend Developer">Frontend Developer</option>
                    <option value="Data Scientist">Data Scientist</option>
                    <option value="Backend Developer">Backend Developer</option>
                </select>
            </div>
            <div class="mb-3">
                <label class="form-label">Max Applicants</label>
                <input type="number" class="form-control" id="maxApplicants" required>
            </div>
            <div class="mb-3">
                <label class="form-label">Accessible Till</label>
                <input type="date" class="form-control" id="accessibleTill" required>
            </div>
            <div class="mb-3">
                <label class="form-label">Eligibility Criteria</label>
                <textarea class="form-control" id="eligibilityCriteria" rows="3" required></textarea>
            </div>
            <button type="button" class="btn btn-primary" onclick="addJob()">Add Job</button>
        </form>
    </div>

    <script>
      function addJob() {
    console.log("Add Job button clicked!"); // ✅ Check if function runs

    let jobPosition = document.getElementById("jobPosition").value;
    let maxApplicants = document.getElementById("maxApplicants").value;
    let accessibleTill = document.getElementById("accessibleTill").value;
    let eligibilityCriteria = document.getElementById("eligibilityCriteria").value;

    if (!jobPosition || !maxApplicants || !accessibleTill || !eligibilityCriteria) {
        alert("Please fill in all fields.");
        return;
    }

    let jobData = {
        jobPosition,
        maxApplicants,
        accessibleTill,
        eligibilityCriteria
    };

    console.log("Sending job data:", jobData); // ✅ Debug request payload

    fetch("http://localhost:3000/addjob", {
        method: "POST",
        headers: { "Content-Type": "application/json" },
        body: JSON.stringify(jobData)
    })
    .then(response => response.json())
    .then(data => {
        console.log("Server response:", data); // ✅ Check server response
        alert(data.message);
        document.getElementById("jobForm").reset();
        window.location.href = "recruit_display.html";
    })
    .catch(error => console.error("Fetch error:", error)); // ✅ Catch fetch errors
}

    </script>
</body>
</html>
